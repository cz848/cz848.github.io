<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="renderer" content="webkit">
  <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta name="author" content="TylerChao">
  <meta name="keywords" content="keywords">
  <meta name="description" content="description">
  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
  <link rel="apple-touch-icon" href="/favicon.png">
  <link rel="stylesheet" href="assets/css/mobile.css">
  <link rel="stylesheet" href="assets/plugins/swiper.css">
  <link rel="stylesheet" href="assets/plugins/pageSwitch.css">
  <link rel="stylesheet" href="assets/css/main.css">
  <title>Steelcase</title>
  <style>
    html, body {
      position: relative;
      height: 100%;
    }
  </style>
</head>

<body style="visibility: hidden;">
  <ul id="nav" class="bar-tabs nav">
    <li class="controller"><a href="javascript:void(0);" class="swiper-btn-next">Steelcase<br> Series 1</a></li>
    <li class="controller"><a href="get-in-touch.html">联络我们</a></li>
    <li class="controller"><a href="what-we-do.html">关于我们</a></li>
  </ul>
  <main id="fullpage" class="swiper-container">
    <div class="swiper-wrapper">
      <!-- One -->
      <div class="swiper-slide">
        <div id="slider" class="slide-container">
          <div class="swiper-wrapper">
            <!-- One -->
            <div class="swiper-slide">
              <span class="text text-1">
                快乐是标配<br>头枕是选配
              </span>
              <img src="assets/img/slide1.jpg" alt="">
            </div>
            <!-- Two -->
            <div class="swiper-slide">
              <span class="text text-2">
                连坐都有坐相
              </span>
              <img src="assets/img/slide2.jpg" alt="">
            </div>
            <!-- Three -->
            <div class="swiper-slide">
              <span class="text text-3">
                令人望其项背<br>的身心科技 
              </span>
              <img src="assets/img/slide3.jpg" alt="">
            </div>
            <!-- Four -->
            <div class="swiper-slide">
              <span class="text text-4">
                工作时也需要<br>是衣架子
              </span>
              <img src="assets/img/slide4.jpg" alt="">
            </div>
            <!-- Five -->
            <div class="swiper-slide">
              <span class="text text-5">
                挑一种颜色，<br>连黑色也足够出色
                <span class="text bottom">
                  <h1><span><img src="assets/img/logo-white.png" alt="steelcase"></span> Series 1</h1>
                  <p>每个人，每一处，恰到好处</p>
                </span>
              </span>
              <img src="assets/img/slide5.jpg" alt="">
            </div>
          </div>
          <div class="slide-nav">
            <a rel="prev" class="icon-arrow-back swiper-prev"></a>
            <a rel="next" class="icon-arrow-forward swiper-next"></a>
          </div>
        </div>
        <div class="placeholder"></div>
      </div>
      <!-- Two -->
      <div data-hash="next" class="swiper-slide">
        <div class="placeholder"></div>
        <div id="subSlider" class="swiper-container autoheight">
          <div class="swiper-wrapper">
            <!-- One -->
            <div class="swiper-slide">
              <div class="intro">Series 1 提供更多个性化选择，完美呈现您独特的品牌风格及公司文化，亦能让每个使用者都能找到适合自己的配搭。每个人，每一处，恰到好处。</div>
            </div>
            <!-- Two -->
            <div class="swiper-slide">
              <div id="chair" class="chair-swiper">
                <header class="tab-header">
                  <h1>选你所想</h1>
                  <ul class="tab" data-tab>
                    <li class="active"><a href="#panel1">颜色</a></li>
                    <li><a href="#panel2">纹理</a></li>
                    <li><a href="#panel3">选配功能</a></li>
                  </ul>
                </header>
                <div class="tab-content">
                  <div class="content active" id="panel1">
                    <div id="chrome" class="color chrome">
                      <section>
                        <div class="chair angle1"></div>
                        <div class="chair angle2"></div>
                        <div class="chair angle3"></div>
                        <div class="chair angle4 show"></div>
                        <div class="chair angle5"></div>
                        <div class="chair angle6"></div>
                        <div class="chair angle7"></div>
                        <div class="chair angle8"></div>
                      </section>
                    </div>
                    <div id="black" class="color black">
                      <section>
                        <div class="chair angle1"></div>
                        <div class="chair angle2"></div>
                        <div class="chair angle3"></div>
                        <div class="chair angle4 show"></div>
                        <div class="chair angle5"></div>
                        <div class="chair angle6"></div>
                        <div class="chair angle7"></div>
                        <div class="chair angle8"></div>
                      </section>
                    </div>
                    <div id="color1" class="color purple show">
                      <section>
                        <div class="chair angle1"></div>
                        <div class="chair angle2"></div>
                        <div class="chair angle3"></div>
                        <div class="chair angle4 show"></div>
                        <div class="chair angle5"></div>
                        <div class="chair angle6"></div>
                        <div class="chair angle7"></div>
                        <div class="chair angle8"></div>
                      </section>
                    </div>
                    <div id="color2" class="color orange">
                      <section>
                        <div class="chair angle1"></div>
                        <div class="chair angle2"></div>
                        <div class="chair angle3"></div>
                        <div class="chair angle4 show"></div>
                        <div class="chair angle5"></div>
                        <div class="chair angle6"></div>
                        <div class="chair angle7"></div>
                        <div class="chair angle8"></div>
                      </section>
                    </div>
                    <div id="color3" class="color red">
                      <section>
                        <div class="chair angle1"></div>
                        <div class="chair angle2"></div>
                        <div class="chair angle3"></div>
                        <div class="chair angle4 show"></div>
                        <div class="chair angle5"></div>
                        <div class="chair angle6"></div>
                        <div class="chair angle7"></div>
                        <div class="chair angle8"></div>
                      </section>
                    </div>
                    <div id="color4" class="color teal">
                      <section>
                        <div class="chair angle1"></div>
                        <div class="chair angle2"></div>
                        <div class="chair angle3"></div>
                        <div class="chair angle4 show"></div>
                        <div class="chair angle5"></div>
                        <div class="chair angle6"></div>
                        <div class="chair angle7"></div>
                        <div class="chair angle8"></div>
                      </section>
                    </div>
                    <div id="color5" class="color yellow">
                      <section>
                        <div class="chair angle1"></div>
                        <div class="chair angle2"></div>
                        <div class="chair angle3"></div>
                        <div class="chair angle4 show"></div>
                        <div class="chair angle5"></div>
                        <div class="chair angle6"></div>
                        <div class="chair angle7"></div>
                        <div class="chair angle8"></div>
                      </section>
                    </div>
                    <div id="color6" class="color green">
                      <section>
                        <div class="chair angle1"></div>
                        <div class="chair angle2"></div>
                        <div class="chair angle3"></div>
                        <div class="chair angle4 show"></div>
                        <div class="chair angle5"></div>
                        <div class="chair angle6"></div>
                        <div class="chair angle7"></div>
                        <div class="chair angle8"></div>
                      </section>
                    </div>
                    <div id="shadow" class="shadow"></div>
                    <button type="button" data-direction="prev" class="icon-arrow-back arrow" disabled></button>
                    <button type="button" data-direction="next" class="icon-arrow-forward arrow"></button>
                    <input id="angleSlider" hidden type="range" min="1" max="8" step="1" value="4">
                    <label for="angleSlider" id="controls" class="controls">
                      <i class="point angle1"></i>
                      <i class="point angle2"></i>
                      <i class="point angle3"></i>
                      <i class="point angle4 show"></i>
                      <i class="point angle5"></i>
                      <i class="point angle6"></i>
                      <i class="point angle7"></i>
                      <i class="point angle8"></i>
                      <i class="oval angle1"></i>
                      <i class="oval angle2"></i>
                      <i class="oval angle3"></i>
                      <i class="oval angle4 show"></i>
                      <i class="oval angle5"></i>
                      <i class="oval angle6"></i>
                      <i class="oval angle7"></i>
                      <i class="oval angle8"></i>
                      <img src="assets/img/controls.png" alt="" width="274">
                    </label>
                    <div class="switcher">
                      <div class="btn-group grid-8">
                        <button type="button" class="active">白色</button>
                        <button type="button">黑色</button>
                      </div>
                      <div class="switch-group grid-4">
                        <label for="radioSwitch">金属色</label>
                        <div class="switch round">
                          <input id="radioSwitch" type="checkbox">
                          <label for="radioSwitch"></label>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="content" id="panel2">
                    <div id="chrome" class="pattern chrome">
                      <section>
                        <div class="chair"></div>
                      </section>
                    </div>
                    <div id="black" class="pattern black">
                      <section>
                        <div class="chair"></div>
                      </section>
                    </div>
                    <div id="pattern1" class="pattern purple show">
                      <section>
                        <div class="chair"></div>
                      </section>
                    </div>
                    <div id="shadow" class="shadow"></div>
                    <button type="button" data-direction="prev" class="icon-arrow-back arrow" disabled></button>
                    <button type="button" data-direction="next" class="icon-arrow-forward arrow"></button>
                    <div class="switcher">
                      <div class="btn-group grid-8">
                        <button type="button" class="active">白色</button>
                        <button type="button">黑色</button>
                      </div>
                      <div class="switch-group grid-4">
                        <label for="radioSwitch">金属色</label>
                        <div class="switch round">
                          <input id="radioSwitch" type="checkbox">
                          <label for="radioSwitch"></label>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="content" id="panel3">
                    <div id="range1" class="range headrest show">
                      <section>
                        <div class="chair"></div>
                      </section>
                    </div>
                    <div id="range2" class="range stool">
                      <section>
                        <div class="chair"></div>
                      </section>
                    </div>
                    <div id="range3" class="range hanger">
                      <section>
                        <div class="chair"></div>
                      </section>
                    </div>
                    <div id="shadow" class="shadow"></div>
                    <button type="button" data-direction="prev" class="icon-arrow-back arrow" disabled></button>
                    <button type="button" data-direction="next" class="icon-arrow-forward arrow"></button>
                  </div>
                </div>
              </div>
            </div>
            <!-- Three -->
            <div class="swiper-slide">
              <div class="video">
                <div class="cover">
                  <h1>&nbsp;&nbsp;每个人，
                    <br>&nbsp;每一处，
                    <br>全力以赴。
                  </h1>
                  <i class="icon-play"></i>
                  <p><img src="assets/img/logo-white.png" alt="steelcase"> Series 1<br>
                    舒适随心</p>
                </div>
              </div>
            </div>
            <div class="swiper-slide">
              <div class="dimensions">
                <h1>直观调整，轻松 <br>找到合适角度。</h1>
                <div class="chair"><img src="assets/img/chair.png" alt=""></div>
                <div class="description">
                  <section class="param1">
                    <p>综合LiveBack® 技术，给你想要的新视角。</p>
                  </section>
                  <section class="param2">
                    <p>自主支撑设计， 放松身体专注<br>任务。</p>
                  </section>
                  <section class="param3">
                    <p>重量激活仰背功能，放松每块紧绷肌肉。</p>
                  </section>
                  <section class="param4">
                    <p>4D旋转扶手， 撑起的你工作<br>激情。</p>
                  </section>
                </div>
              </div>
              <a href="get-in-touch.html" class="tile">
                <p>联络我们</p>
                <i class="icon-arrow-right"></i>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
  <script src="assets/js/libs.min.js"></script>
  <script src="assets/js/mobile.js"></script>
  <script src="assets/js/main.js"></script>
  <script src="assets/plugins/swiper.js"></script>
  <script src="assets/plugins/pageSwitch.js"></script>
  <script>
  setTimeout(function() {
    document.body.style.visibility = '';
    if(location.hash === '#next') {
      var y = 70 - window.innerHeight;
      $('#nav .swiper-btn-next').parent()
        .addClass('active')
        .parent()
        .css({
          '-webkit-transition': 'none',
          'transition': 'none',
          '-webkit-transform': 'translate(0, ' + y + 'px)',
          'transform': 'translate(0, ' + y + 'px)',
        });
      swiper.detachEvents();
    }
  }, 0);

  var swiper = new Swiper('#fullpage', {
    direction: 'vertical',
    effect: 'slide',
    slidesPerView: 'auto',
    initialSlide: 0,
    nextButton: '.swiper-btn-next',
    hashnav: true,
    hashnavWatchState: true,
    history: false,
  });

  var subs = new Swiper('#subSlider', {
    direction: 'vertical',
    effect: 'slide',
    autoHeight: true,
    nested: true,
    slidesPerView: 'auto',
    observer: true,
    // freeMode: true,
    freeModeMomentumBounce: false,
  });

  var nav = $('#nav');

  var startY = 0;
  var currentY = 0;

  swiper.slides.eq(0)
    .on('touchstart', function(e) {
      startY = currentY = e.originalEvent.targetTouches[0].pageY;
    })
    .on('touchmove', function(e) {
      currentY = e.originalEvent.targetTouches[0].pageY;

      if (startY != currentY) {
        return false;
      }
    });

  $('#nav .swiper-btn-next').on('click', function(e) {
    var y = 70 - window.innerHeight;
    $(this).parent()
      .addClass('active')
      .parent()
      .css({
        'transform': 'translate(0, ' + y + 'px)',
        '-webkit-transform': 'translate(0, ' + y + 'px)'
      });
    swiper.detachEvents();
  });

  subs
    .on('touchStart', function(e) {
      subs.snapGrid[4] = subs.snapGrid[3] + subs.slides[3].offsetHeight - window.innerHeight + 70;
    })
    .on('touchMove', function(e) {

      if (subs.activeIndex === 3 && (subs.swipeDirection === 'next' || (subs.swipeDirection === 'prev' && subs.translate < -1238))) {
        subs.params.freeMode = true;
      }
      else {
        subs.params.freeMode = false;
      }
    })
    .on('touchEnd', function(e) {
      if (subs.translate > -1238) {
        subs.params.freeMode = false;
      }
    })
    .on('transitionEnd', function(e) {
      if (subs.translate > -1238) {
        var arr = [];
        for(var i = 0; i < subs.slidesGrid.length; i++) {
          arr.push(Math.abs(subs.translate + subs.slidesGrid[i]));
        }
        subs.slideTo(smallest(arr));
        subs.params.freeMode = false;
      }
  });


  var slider = new pageSwitch('#slider .swiper-wrapper', {
      duration: 1000,
      start: 0,
      direction: 0,
      loop: true,
      ease: 'ease',
      transition: 'scrollCoverX',
      mouse: false,
      mousewheel: false,
      arrowkey: false
    }),
    navs = $('#slider .slide-nav a'),
    text = $('#slider .swiper-slide .text');

  navs.on('click', function(e) {
    slider.slide(slider.current + 1 * (this.rel === 'next' ? 1 : -1));
  });
  text[0].classList.add('active');
  slider.on('before', function(m, n) {
    text[m].classList.remove('active');
  }).on('after', function(m, n) {
    text[m].classList.add('active');
  });


  function smallest(a) {
    var lowest = 0;
    for (var i = 1; i < a.length; i++) {
      if (a[i] < a[lowest]) lowest = i;
    }
    return lowest;
  }


  $('.switcher .btn-group button').click(function(e) {
    if ($(this).hasClass('active')) return;
    $(this).addClass('active').siblings('.active').removeClass('active');
    $('#black').toggleClass('show');
  });

  $('.switcher input[type=checkbox]').change(function(e) {
    $('#chrome').toggleClass('show');
  });


  var startX = 0;
  var currentX = 0;
  var startY = 0;
  var currentY = 0;
  var start = 8.5;
  var end = 274 - start * 2 - 22;
  var angNum = 4;
  var distance = Math.floor(end / 7 * 10) / 10;
  var iteration = 0;
  var offsetX = (window.innerWidth - 274) / 2;
  var grid = [];
  for (var i = 0; i < 8; i++) {
    grid[i] = distance * i + start;
  }
  console.log(grid);
  $('#controls')
    .on('touchstart', function(e) {
      // startX = currentX = e.originalEvent.targetTouches[0].pageX - offsetX;
      startY = currentY = e.originalEvent.targetTouches[0].pageY;
    })
    .on('touchmove', function(e) {
      currentX = e.originalEvent.targetTouches[0].pageX - offsetX;
      currentY = e.originalEvent.targetTouches[0].pageY;
      if (Math.abs(currentY - startY)) {
        e.preventDefault();
        e.stopPropagation();
      }

      if (currentX < start || currentX > end + start + 11) {
        return false;
      }

      console.log(currentX, start);
      var diff = currentX;
      // for (var i = 0; i < 8; i++) {
      // if (diff > 0 && diff > distance / 2) {
      //   $('#angleSlider').val(++angNum).trigger('input');
      //   // startX = grid[angNum - 1];
      // }
      // else if (diff < 0 && diff < -distance / 2) {
      //   $('#angleSlider').val(--angNum).trigger('input');
      //   // startX = grid[angNum - 1];
      // }
      if (diff > grid[angNum - 1] + distance / 2 + 11) {
        $('#angleSlider').val(++angNum).trigger('input');
      }
      else if (diff < grid[angNum - 1] - distance / 2 + 11) {
        $('#angleSlider').val(--angNum).trigger('input');
      }
      // }
    })
    .on('touchend', function(e) {
    });
</script>
</body>

</html>
