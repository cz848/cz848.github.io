!function(a,b,c,d){"use strict";a(function(){"undefined"!=typeof FastClick&&"undefined"!=typeof c.body&&FastClick.attach(c.body)});var e=function(b,c){var d=this,e=(a.isArray(c)?c[0]:c)||b,f=function(){var b=a(this),c=!b.data(d.name+"-init");b.data(d.name+"-init",a.extend(!0,{},d.settings,e,d.data_options(b))),c&&d.events(this)};if(a(this.scope).is("[data-"+this.name+"]")?f.call(this.scope):a("[data-"+this.name+"]",this.scope).each(f),"string"==typeof b)return a.isArray(c)?this[b].apply(this,c):this[b].call(this,c)},f=function(a,b){function c(){b(a[0])}function d(){this.one("load",c)}return a.attr("src")?void(a[0].complete||4===a[0].readyState?c():d.call(a)):void c()};b.Mobile={name:"Mobile",stylesheet:a("<style></style>").appendTo("head")[0].sheet,global:{},init:function(a,b,c,d,e){var f=[a,c,d,e],g=[];if(this.scope=a||this.scope,b&&"string"==typeof b&&!/reflow/i.test(b))this.libs.hasOwnProperty(b)&&g.push(this.init_lib(b,f));else for(var h in this.libs)g.push(this.init_lib(h,b));return a},init_lib:function(b,c){return this.libs.hasOwnProperty(b)?(this.patch(this.libs[b]),c&&c.hasOwnProperty(b)?("undefined"!=typeof this.libs[b].settings?a.extend(!0,this.libs[b].settings,c[b]):"undefined"!=typeof this.libs[b].defaults&&a.extend(!0,this.libs[b].defaults,c[b]),this.libs[b].init.apply(this.libs[b],[this.scope,c[b]])):(c=c instanceof Array?c:new Array(c),this.libs[b].init.apply(this.libs[b],c))):function(){}},patch:function(a){a.scope=this.scope,a.data_options=this.utils.data_options,a.bindings=e},inherit:function(a,b){for(var c=b.split(" "),d=c.length;d--;)this.utils.hasOwnProperty(c[d])&&(a[c[d]]=this.utils[c[d]])},libs:{},utils:{data_options:function(a,b){function c(a){return!isNaN(a-0)&&null!==a&&""!==a&&a!==!1&&a!==!0}b=b||"options";var d,e,f,g={},h=a.data(b);if("object"==typeof h)return h;for(f=(h||":").split(";"),d=f.length;d--;)e=f[d].split(":"),e=[e[0],e.slice(1).join(":")],/true/i.test(e[1])&&(e[1]=!0),/false/i.test(e[1])&&(e[1]=!1),c(e[1])&&(e[1].indexOf(".")===-1?e[1]=parseInt(e[1],10):e[1]=parseFloat(e[1])),2===e.length&&e[0].length>0&&(g[e[0].trim()]=e[1].trim());return g},add_custom_rule:function(a){Mobile.stylesheet&&Mobile.stylesheet.insertRule(a,Mobile.stylesheet.cssRules.length)},image_loaded:function(b,c){function e(a){for(var b=a.length,c=b-1;c>=0;c--)if(a.attr("height")===d)return!1;return!0}var g=b.length;(0===g||e(b))&&c(b),b.each(function(){f(a(this),function(){g-=1,0===g&&c(b)})})},random_str:function(){return this.fidx||(this.fidx=0),this.prefix=this.prefix||[this.name||"M",(+new Date).toString(36)].join("-"),this.prefix+(this.fidx++).toString(36)}}},a.fn.mobile=function(){var a=Array.prototype.slice.call(arguments,0);return this.each(function(){return Mobile.init.apply(Mobile,[this].concat(a)),this})}}(jQuery,window,window.document),function(a,b,c,d){"use strict";Mobile.libs.validator={name:"validator",data_attr:function(){return"data-"+this.name},settings:{validate_on:"manual",exception:":hidden, [data-validator-ignore]",focus_on_invalid:!1,has_hint:!0,error_labels:!0,error_class:"has-error",feedback:".form-row",alert_element:".error",isAjax:!1,preventDefault:!1,timeout:1e3,patterns:{mobilecn:/^1[3-9]\d{9}$/,mobilehk:/^[69]\d{7}$/,email:/^[\w.!#$%&'*+\/=?^`{|}~-]+@[a-zA-Z\d](?:[a-zA-Z\d-]{0,61}[a-zA-Z\d])?(?:\.[a-zA-Z\d](?:[a-zA-Z\d-]{0,61}[a-zA-Z\d])?)*$/},verifiers:{requiredone:function(b,c,d){return!!a(b).closest("["+this.data_attr()+"]").find('input[type="'+b.type+'"][name="'+b.name+'"]:checked:not(:disabled)').length},equalto:function(a,b,d){var e=c.querySelector(a.getAttribute(this.data_attr()+"-equalto"));return e&&e.value===a.value},oneof:function(a,b,d){var e=c.querySelectorAll(a.getAttribute(this.data_attr()+"-oneof"));return this.valid_oneof(e,b,d)}},alerts:{mobilecn:"手机号码有误，请重新填写！",mobilehk:"手机号码有误，请重新填写！",email:"请填写正确的邮箱地址！"}},timer:null,init:function(a,b){this.bindings(b,Array.prototype.slice.call(arguments,2))},events:function(b){function c(a,b,c){clearTimeout(d.timer),d.timer=setTimeout(function(){d.validate(a,[].concat(b),c)}.bind(b),f.timeout)}var d=this,e=a(b).attr("novalidate",!0),f=e.data(this.name+"-init")||{};this.invalid_attr="data-invalid",e.off("."+this.name).on("submit."+this.name,function(b){var c=a(this),e="ajax"===c.data(d.name)||d.settings.isAjax;return d.validate(c,c.find("input, textarea, select, ["+d.data_attr()+"-verifier]").not(f.exception).get(),b,e)}).on("validate."+this.name,function(b){"manual"===f.validate_on&&d.validate(a(this),[b.target],b)}).on("reset."+this.name,function(b){return d.reset(a(this),b)}).find("input, textarea, select").not(f.exception).off("."+this.name).on("change."+this.name+" blur."+this.name,function(b){var e=(this.id,a(this)),g=e.closest("["+d.data_attr()+"]"),h=g.find("["+d.data_attr()+"-oneof]").filter(function(){if(g.find(a(this).data(d.name+"-oneof")).get().indexOf(e[0])>-1)return this})[0];h&&c(g,h,b),f.validate_on===b.type&&c(g,this,b)})},reset:function(b,c){b.removeAttr(this.invalid_attr);var d=b.data(this.name+"-init")||{};a("["+this.invalid_attr+"]",b).removeAttr(this.invalid_attr),a("."+d.error_class,b).not(d.alert_element).removeClass(d.error_class),a(":input",b).not(":radio, :checkbox, :button, :submit, :reset,"+d.exception).val("").removeAttr(this.invalid_attr),a("input:radio, input:checkbox",b).prop("checked",!1).removeAttr(this.invalid_attr)},disabledSubmit:function(b){b.find("button[type=submit]").prop("disabled",!0),a('[form="'+b.attr("id")+'"]').prop("disabled",!0).addClass("disabled")},enabledSubmit:function(b){b.find("button[type=submit]").prop("disabled",!1),a('[form="'+b.attr("id")+'"]').prop("disabled",!1).removeClass("disabled")},validate:function(b,c,d,e){for(var f=this,g=this.parse_patterns(b,c),h=g.length,i=/submit/i.test(d.type),j=0;j<h;j++)if(!g[j]&&(i||e))return this.settings.focus_on_invalid&&c[j].focus(),b.trigger("invalid."+this.name,[d]).attr(this.invalid_attr,""),this.enabledSubmit(b),!1;return(i||e)&&(this.settings.preventDefault&&d.preventDefault(),this.disabledSubmit(b),b.trigger("valid."+this.name,[d])),b.removeAttr(this.invalid_attr),!e||(a.ajax({url:b.attr("action"),type:b.attr("method"),data:b.serialize(),dataType:"json",beforeSend:function(){return b.trigger("start.ajax."+this.name,arguments)}}).always(function(){b.trigger("complete.ajax."+this.name,arguments),f.enabledSubmit(b)}).done(function(){b.trigger("success.ajax."+this.name,arguments)}).fail(function(){b.trigger("error.ajax."+this.name,arguments)}),!1)},parse_patterns:function(a,b){for(var c,d=b.length,e=[];d--;)c=this.pattern(b[d]),c&&e.push(c);return e.length&&(e=this.check_validation(a,e)),e},pattern:function(a){var b=a.type,c=a.hasAttribute("required"),d=a.getAttribute("pattern"),e=a.getAttribute(this.data_attr()+"-verifier")||"",f=a.hasAttribute(this.data_attr()+"-equalto"),g=a.hasAttribute(this.data_attr()+"-oneof"),h=null,i=null;if(c&&!a.value.trim().length?h="required":this.settings.patterns.hasOwnProperty(d)?(h=d,i=this.settings.patterns[d]):this.settings.patterns.hasOwnProperty(b)?(h=b,i=this.settings.patterns[b]):this.settings.patterns.hasOwnProperty(e)?(h=e,i=this.settings.verifiers[e]):d?i=new RegExp("^"+d.replace(/^\^(.+)\$$/,"$1")+"$"):(f||g)&&(h=f?"equalto":"oneof",i=/^.*$/),h||i||c)return[a,h,i,c]},check_validation:function(b,c){for(var d=c.length,e=[],f=b.data(this.name+"-init")||{};d--;){var g,h=c[d][0],i=c[d][2],j=c[d][3],k=h.value.trim(),l=["radio","checkbox"].indexOf(h.type)>-1,m=a(h).parent(),n=f.feedback?a(h).parents(f.feedback):null,o=h.getAttribute(this.data_attr()+"-verifier"),p=o?o.split(" "):[],q=function(){var b=[];return m.is("label")?b=m:n.length&&(b=n.find("label")),b.length||(b=a('label[for="'+h.id+'"]')),b}(),r=[],s=!0,t=!0;if(!h.disabled){if(l&&j&&p.push("requiredone"),h.getAttribute(this.data_attr()+"-equalto")&&p.push("equalto"),h.getAttribute(this.data_attr()+"-oneof")&&p.push("oneof"),n.length||(n=m),n.is("label")&&(n=n.parent()),j)if(g=k.length,r.push(g),g)this.validSuccess(h,n,q);else if(e=this.validError(h,n,q,c[d],r),e.length)break;if(p.length){for(var u=0;u<p.length;u++)g=this.settings.verifiers[p[u]].apply(this,[h,j,n]),r.push(g),t=g&&s,s=g;if(t)this.validSuccess(h,n,q);else if(e=this.validError(h,n,q,c[d],r),e.length)break}else if(i)if("function"==a.type(i)?g=i(h,j,n):"regexp"==a.type(i)&&(g=i.test(k)),k.length||(g=h.checkValidity()),r.push(g),g)this.validSuccess(h,n,q);else if(e=this.validError(h,n,q,c[d],r),e.length)break;e=e.concat(r)}}return e},validSuccess:function(b,c,d){b.removeAttribute(this.invalid_attr),b.setAttribute("aria-invalid","false"),b.removeAttribute("aria-describedby"),c.removeClass(this.settings.error_class),d.length>0&&this.settings.error_labels&&d.removeClass(this.settings.error_class).removeAttr("role"),a(b).triggerHandler("valid")},validError:function(b,c,d,e,f){var g=[];b.setAttribute(this.invalid_attr,""),b.setAttribute("aria-invalid","true");var h=e[3],i=c.find(this.settings.alert_element),j=e[0].dataset.alerts||this.settings.alerts[e[1]]||"输入不符合要求，请检查！";if(h){var k="输入";(["radio","checked"].indexOf(b.type)>-1||"select"===b.tagName)&&(k="选择"),j=j.replace("{how}",k).replace("{placeholder}",d.length?d.text().replace(/[：:*]\s*$/g,"").trim():e[0].placeholder||"其中一项")}if(i.length){var l=i.attr("id");l&&b.setAttribute("aria-describedby",l)}else if(this.settings.has_hint)return alert(j),a(b).triggerHandler("invalid"),g.concat(f);return c.addClass(this.settings.error_class),d.length>0&&this.settings.error_labels&&d.addClass(this.settings.error_class).attr("role","alert"),a(b).triggerHandler("invalid"),g},valid_oneof:function(b,c,d,e){var b=a(b),f=b.filter(function(){return["radio","checkbox"].indexOf(this.type)>-1?this.checked:!!this.value.trim().length}).length>0;if(f?(b.removeAttr(this.invalid_attr),d.removeClass(this.settings.error_class)):(b.attr(this.invalid_attr,""),d.addClass(this.settings.error_class)),!e){var g=this;b.each(function(){g.valid_oneof.call(g,this,null,d,!0)})}return f},reflow:function(b,c){var d=this,e=a("["+this.data_attr()+"]");e.each(function(){d.events(this)})}}}(jQuery,window,window.document);